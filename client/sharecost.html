<head>
	<title>ShareCost</title>
	<meta name="description" content="ShareCost helps you split purchases between groups of people quickly and easily. Just log in with Venmo to start sharing.">
</head>

<template name="login">
	<div class = "row text-center">
		<h1>Welcome!</h1>
	</div>
	<div class = "row text-center">
		{{#if currentUser}}
			You are logged in as {{currentUser.services.venmo.display_name}}
			<button id="logout">Logout</button>
		{{else}}
			<button id="venmo-login" class="btn btn-default">Login with Venmo</button>
		{{/if}}
	</div>
</template>

<template name='home'>
	<div class = "row">
		<div id = "center" class = "col-xs-8 center-block text-center home-content">
			{{#if currentUser}}
				<p>You are logged in!</p>
				<p><button id="create" class="btn btn-default">Create a Proposal</button></p>
				<ul class = "purchase-list">
					{{#each purchases}}
						{{> purchaseProposal}}
					{{/each}}
				</ul>
			{{else}}
				<h2>Waiting to log in...</h2>
			{{/if}}
		</div>
	</div>
</template>

<template name="BaseLayout">
	<div class = "topbar">
		<a href="/">ShareCost</a>
		{{#if currentUser}}
			<button id="logout" class="btn btn-default topbar-logout right-align">Logout</button>
			<img class = "topbar-pic right-align" src={{getProfilePictureUrl}} alt="text">
		{{/if}}
		<div id = "center"></div>
	</div>
	<div class = "topbar-ghost"></div>
	<div class = "container">
		{{> yield}}
	</div>
</template>

<template name="create">
	<div class = "row text-center">
		<h2>Create a Proposal</h2>
	</div>
	<div class = "row">
		<div id = "center" class = "proposal-form col-xs-10 center-block">
			<form class="new-purchase form-horizontal" role = "form">
				<div class="form-group">
				    <label class = "control-label" for="title">Title:</label>
				    <input type="text" name = "title" class="form-control" id="title">
				</div>
				<div class="form-group">
				    <label class = "control-label" for="description">Description:</label>
				    <textarea name = "description" class="form-control" id="description"></textarea>
				</div>
				<div class="form-group">
				    <label class = "control-label" for="cost">Total Cost:</label>
				    <input type="text" name = "cost" class="cost-input form-control" id="cost">
				</div>
				<div class = "form-group">
					<ul id="selected-friends">
						{{#each selectedFriends}}
							<li id="{{id}}" class = "added-friend">
								<span>{{label}}</span>
								<button type="button" class="delete-friend btn btn-default">Remove</button> </li>
								<div id="center"></div>
						{{/each}}
					</ul>
				</div>
				<div class = "form-group select-friends">
					<label class = "control-label" for="friends-autocomplete">Add Friends:</label>
					<input type="text" class = "form-control" name="friends" id="friends-autocomplete">
				</div>
				<a href="/" class="cancel btn btn-default">Cancel</a>
				<input class = "btn btn-default" type="submit" value="Submit">
			</form>
		</div>
	</div>
</template>

<template name="purchaseProposal">
	<div class = "row proposal">
		<div class = "col-xs-3"><h3><a href={{getPurchaseRoute}}> {{title}}</a></h3></div>
		<div class = "col-xs-6">
			<p>Cost: {{cost}}</p>
			<p>Created by: {{creatorName}}</p>
			<p>{{description}}</p>
			<div>
				<p>Accepted:</p>
				<ul>
					{{#each accepted}}
						<li>{{.}}</li>
					{{/each}}
				</ul>
			</div>
			<div>
				<p>Rejected:</p>
				<ul>
					{{#each rejected}}
						<li>{{.}}</li>
					{{/each}}
				</ul>
			</div>
			<div>
				<p>Pending:</p>
				<ul>
					{{#each pending}}
						<li>{{.}}</li>
					{{/each}}
				</ul>
			</div>
		</div>
		<div class = "accept-reject col-xs-3">
			{{#unless isCreator}}
				<div><button id="accept-butt" class = "btn btn-default">Accept</button></div>
				<div><button id="reject-butt" class = "btn btn-default">Reject</button></div>
			{{/unless}}
		</div>
	</div>
</template>

<template name="ShowPurchase">
	<ul>
		<li>{{title}}</li>
		<li>{{description}}</li>
		<li>{{cost}}</li>
		<li>{{creator}}</li>
	</ul>
	{{#each populateMessages}}
		<div class="message">{{title}}: {{message}}</div>
	{{/each}}
	<form class="new-message form-horizontal" role = "form">
		<div class="form-group">
		    <label class = "control-label" for="messageTitle">Message Title:</label>
		    <input type="text" name = "messageTitle" class="form-control" id="messagetitle">
		</div>
		<div class="form-group">
		    <label class = "control-label" for="description">Message:</label>
		    <input type="text" name = "message" class="form-control" id="message">
		</div>
		<input class = "btn btn-default" type="submit" value="Submit" id="messageSubmit">
	</form>
</template>
